<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tax Interview — CUBE</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x1F4CB;</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../modules/shared.css">
  <link rel="stylesheet" href="taxes.css">
  <link rel="stylesheet" href="interview.css">
</head>
<body>

<!-- NAV -->
<nav class="back-nav">
  <div class="back-nav-inner">
    <a href="/taxes/" class="back-link"><span class="arrow">&#x2190;</span> Tax Dashboard</a>
    <span class="nav-module-name">TAX INTERVIEW</span>
  </div>
</nav>

<!-- HEADER -->
<header class="module-header">
  <span class="module-num">&#x2753;</span>
  <div class="module-label">Guided Questionnaire</div>
  <h1 class="module-title">Tax Interview</h1>
  <p class="module-desc">
    Answer questions about your tax situation. We'll build your return step by step &#x2014;
    just like TurboTax, but transparent.
  </p>
</header>

<!-- CONTENT -->
<div class="content">

  <!-- PROGRESS BAR -->
  <div class="interview-progress" id="progress-bar">
    <div class="progress-step active" data-step="1">
      <div class="progress-dot">1</div>
      <div class="progress-label">Year</div>
    </div>
    <div class="progress-step" data-step="2">
      <div class="progress-dot">2</div>
      <div class="progress-label">Status</div>
    </div>
    <div class="progress-step" data-step="3">
      <div class="progress-dot">3</div>
      <div class="progress-label">Info</div>
    </div>
    <div class="progress-step" data-step="4">
      <div class="progress-dot">4</div>
      <div class="progress-label">Dependents</div>
    </div>
    <div class="progress-step" data-step="5">
      <div class="progress-dot">5</div>
      <div class="progress-label">Income</div>
    </div>
    <div class="progress-step" data-step="6">
      <div class="progress-dot">6</div>
      <div class="progress-label">Adjustments</div>
    </div>
    <div class="progress-step" data-step="7">
      <div class="progress-dot">7</div>
      <div class="progress-label">Deductions</div>
    </div>
    <div class="progress-step" data-step="8">
      <div class="progress-dot">8</div>
      <div class="progress-label">Credits</div>
    </div>
    <div class="progress-step" data-step="9">
      <div class="progress-dot">9</div>
      <div class="progress-label">Review</div>
    </div>
  </div>

  <!-- ═══ SECTION 1: TAX YEAR ═══ -->
  <section class="interview-section active" data-section="1">
    <div class="section-question">Which tax year are you filing for?</div>
    <div class="section-help">Select the year for which you're preparing your return.</div>
    <div class="option-grid" data-field="taxYear">
      <div class="option-card" data-value="2023">
        <div class="option-label">2023</div>
        <div class="option-desc">Filed by Apr 2024</div>
      </div>
      <div class="option-card" data-value="2024">
        <div class="option-label">2024</div>
        <div class="option-desc">Filed by Apr 2025</div>
      </div>
      <div class="option-card selected" data-value="2025">
        <div class="option-label">2025</div>
        <div class="option-desc">Due Apr 2026</div>
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 2: FILING STATUS ═══ -->
  <section class="interview-section" data-section="2">
    <div class="section-question">What is your filing status?</div>
    <div class="section-help">Your filing status affects your standard deduction and tax brackets.</div>
    <div class="option-grid" data-field="filingStatus">
      <div class="option-card selected" data-value="single">
        <div class="option-label">Single</div>
        <div class="option-desc">Unmarried or legally separated</div>
      </div>
      <div class="option-card" data-value="mfj">
        <div class="option-label">Married Filing Jointly</div>
        <div class="option-desc">Married, filing one return</div>
      </div>
      <div class="option-card" data-value="mfs">
        <div class="option-label">Married Filing Separately</div>
        <div class="option-desc">Married, each files own return</div>
      </div>
      <div class="option-card" data-value="hoh">
        <div class="option-label">Head of Household</div>
        <div class="option-desc">Unmarried with dependent</div>
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 3: PERSONAL INFO ═══ -->
  <section class="interview-section" data-section="3">
    <div class="section-question">Personal Information</div>
    <div class="section-help">Basic info for your return. SSN last 4 is used for document matching only.</div>

    <div class="input-row">
      <div class="input-group">
        <div class="input-label">First Name</div>
        <input type="text" class="input-field" id="firstName" placeholder="Jane">
      </div>
      <div class="input-group">
        <div class="input-label">Last Name</div>
        <input type="text" class="input-field" id="lastName" placeholder="Doe">
      </div>
    </div>

    <div class="input-row">
      <div class="input-group">
        <div class="input-label">SSN Last 4</div>
        <input type="text" class="input-field" id="ssnLast4" placeholder="1234" maxlength="4" pattern="[0-9]{4}">
      </div>
      <div class="input-group">
        <div class="input-label">State of Residence</div>
        <div class="option-grid" data-field="stateOfResidence" style="margin-bottom:0">
          <div class="option-card" data-value="CA" style="padding:12px">
            <div class="option-label" style="font-size:13px">CA</div>
          </div>
          <div class="option-card" data-value="NY" style="padding:12px">
            <div class="option-label" style="font-size:13px">NY</div>
          </div>
          <div class="option-card" data-value="other" style="padding:12px">
            <div class="option-label" style="font-size:13px">Other</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 4: DEPENDENTS ═══ -->
  <section class="interview-section" data-section="4">
    <div class="section-question">Do you have dependents?</div>
    <div class="section-help">Dependents affect your eligibility for Child Tax Credit and Head of Household status.</div>

    <div class="toggle-row" data-field="hasChildrenUnder17">
      <div>
        <div class="toggle-label">Children under 17?</div>
        <div class="toggle-sublabel">Qualifies for $2,000 Child Tax Credit each</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div id="childCount-wrapper" style="display:none;margin:12px 0 12px 20px">
      <div class="input-group" style="max-width:200px">
        <div class="input-label">How many?</div>
        <input type="number" class="input-field" id="childCount" min="1" max="10" value="1">
      </div>
    </div>

    <div class="toggle-row" data-field="hasOtherDependents">
      <div>
        <div class="toggle-label">Other dependents?</div>
        <div class="toggle-sublabel">Parents, relatives, or others you support</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 5: INCOME SOURCES ═══ -->
  <section class="interview-section" data-section="5">
    <div class="section-question">What income did you receive?</div>
    <div class="section-help">Select all that apply. For each "yes", you can upload documents or enter amounts manually.</div>

    <div class="toggle-row" data-field="hasW2">
      <div>
        <div class="toggle-label">W-2 employment income?</div>
        <div class="toggle-sublabel">Wages from an employer</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="has1099NEC">
      <div>
        <div class="toggle-label">1099-NEC self-employment income?</div>
        <div class="toggle-sublabel">Freelance, gig, or contract work</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <!-- 1099-NEC Repeating Cards -->
    <div id="nec-cards" style="display:none;margin:12px 0 16px 0">
      <div id="nec-cards-list"></div>
      <button class="add-card-btn" id="add-nec-btn">+ Add another 1099-NEC</button>
    </div>

    <div class="toggle-row" data-field="has1099INT">
      <div>
        <div class="toggle-label">1099-INT interest income?</div>
        <div class="toggle-sublabel">Bank interest, savings bonds</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div id="int-entry" style="display:none;margin:0 0 12px 20px">
      <div class="input-group" style="max-width:300px">
        <div class="input-label">Total Interest Income</div>
        <input type="number" class="input-field money" id="interestIncome" placeholder="0">
      </div>
    </div>

    <div class="toggle-row" data-field="has1099DIV">
      <div>
        <div class="toggle-label">1099-DIV dividend income?</div>
        <div class="toggle-sublabel">Stock dividends, mutual funds</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div id="div-entry" style="display:none;margin:0 0 12px 20px">
      <div class="input-group" style="max-width:300px">
        <div class="input-label">Total Ordinary Dividends</div>
        <input type="number" class="input-field money" id="dividendIncome" placeholder="0">
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 6: ADJUSTMENTS ═══ -->
  <section class="interview-section" data-section="6">
    <div class="section-question">Above-the-line adjustments</div>
    <div class="section-help">These reduce your AGI before standard deduction. Select all that apply.</div>

    <div class="toggle-row" data-field="has401k">
      <div>
        <div class="toggle-label">401(k) / 403(b) contributions?</div>
        <div class="toggle-sublabel">Usually shown on W-2 Box 12</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="hasIRA">
      <div>
        <div class="toggle-label">Traditional IRA contributions?</div>
        <div class="toggle-sublabel">Deductible IRA contributions</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="hasHSA">
      <div>
        <div class="toggle-label">HSA contributions?</div>
        <div class="toggle-sublabel">Health Savings Account (requires HDHP)</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="hasStudentLoan">
      <div>
        <div class="toggle-label">Student loan interest paid?</div>
        <div class="toggle-sublabel">Up to $2,500 deductible (1098-E)</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="hasSEHealthInsurance">
      <div>
        <div class="toggle-label">Self-employed health insurance?</div>
        <div class="toggle-sublabel">100% deductible for SE individuals</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="isEducator">
      <div>
        <div class="toggle-label">K-12 educator expenses?</div>
        <div class="toggle-sublabel">Up to $300 for unreimbursed supplies</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 7: DEDUCTIONS ═══ -->
  <section class="interview-section" data-section="7">
    <div class="section-question">Deductions</div>
    <div class="section-help">Most filers benefit from the standard deduction. Itemize only if your total exceeds it.</div>

    <div class="option-grid" data-field="deductionType">
      <div class="option-card selected" data-value="standard">
        <div class="option-label">Standard Deduction</div>
        <div class="option-desc" id="std-ded-amount">$15,000 (single)</div>
      </div>
      <div class="option-card" data-value="itemized">
        <div class="option-label">Itemized Deductions</div>
        <div class="option-desc">Mortgage + SALT + Charitable</div>
      </div>
    </div>

    <div id="itemized-details" style="display:none">
      <div class="input-group">
        <div class="input-label">Mortgage Interest (1098)</div>
        <input type="number" class="input-field money" id="mortgageInterest" placeholder="0">
      </div>
      <div class="input-group">
        <div class="input-label">State & Local Taxes (SALT, capped at $10,000)</div>
        <input type="number" class="input-field money" id="saltAmount" placeholder="0">
      </div>
      <div class="input-group">
        <div class="input-label">Charitable Contributions</div>
        <input type="number" class="input-field money" id="charitableAmount" placeholder="0">
      </div>
    </div>

    <div class="toggle-row" data-field="hasHomeOffice" style="margin-top:16px">
      <div>
        <div class="toggle-label">Home office (self-employed only)?</div>
        <div class="toggle-sublabel">Simplified: $5/sq ft, max $1,500</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="hasBusinessMileage">
      <div>
        <div class="toggle-label">Business mileage (self-employed)?</div>
        <div class="toggle-sublabel">Keep a mileage log for deduction</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 8: CREDITS ═══ -->
  <section class="interview-section" data-section="8">
    <div class="section-question">Tax Credits</div>
    <div class="section-help">Credits directly reduce your tax bill. Select all that apply.</div>

    <div class="toggle-row" data-field="hasEducationExpenses">
      <div>
        <div class="toggle-label">Education expenses (1098-T)?</div>
        <div class="toggle-sublabel">AOTC up to $2,500 or LLC up to $2,000</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="isRenter">
      <div>
        <div class="toggle-label">Rented your residence?</div>
        <div class="toggle-sublabel">CA: $60 credit if AGI qualifies</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="hasEV">
      <div>
        <div class="toggle-label">Purchased an electric vehicle?</div>
        <div class="toggle-sublabel">Up to $7,500 new / $4,000 used</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>

    <div class="toggle-row" data-field="hasEnergyImprovements">
      <div>
        <div class="toggle-label">Home energy improvements?</div>
        <div class="toggle-sublabel">Heat pumps, insulation, windows — up to $3,200</div>
      </div>
      <div class="toggle-btn">
        <button data-val="yes">Yes</button>
        <button data-val="no" class="active">No</button>
      </div>
    </div>
  </section>

  <!-- ═══ SECTION 9: REVIEW ═══ -->
  <section class="interview-section" data-section="9">
    <div class="section-question">Review Your Answers</div>
    <div class="section-help">Double-check everything before running the tax computation.</div>

    <div id="review-content"></div>

    <div style="text-align:center;margin-top:32px">
      <button class="nav-btn primary" id="run-computation-btn" style="font-size:16px;padding:16px 40px">
        Run Tax Computation &#x2192;
      </button>
    </div>
  </section>

  <!-- NAVIGATION -->
  <div class="interview-nav">
    <button class="nav-btn" id="prev-btn" disabled>&#x2190; Back</button>
    <div style="font-family:'Space Mono',monospace;font-size:12px;color:var(--text-muted)" id="step-indicator">1 / 9</div>
    <button class="nav-btn primary" id="next-btn">Next &#x2192;</button>
  </div>

</div>

<!-- FOOTER -->
<footer class="module-footer">
  <div class="footer-brand">CUBE &#xD7; TAX PREP</div>
  <div class="footer-right"><a href="/taxes/">Dashboard</a></div>
</footer>

<div class="noise-overlay"></div>

<script src="tax-data.js"></script>
<script src="interview.js"></script>
</body>
</html>
