<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tax Prep ‚Äî CUBE</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìã</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../modules/shared.css">
  <link rel="stylesheet" href="wizard.css">
</head>
<body>

<!-- NAV -->
<nav class="back-nav">
  <div class="back-nav-inner">
    <a href="/" class="back-link"><span class="arrow">‚Üê</span> CUBE Home</a>
    <span class="nav-module-name">TAX PREP</span>
    <span id="nav-status" style="font-size:12px;color:var(--text-muted)"></span>
  </div>
</nav>

<!-- HEADER -->
<header class="module-header">
  <span class="module-num">TX</span>
  <div class="module-label" id="tax-year-label">Tax Year 2025</div>
  <h1 class="module-title">Tax Preparation</h1>
  <p class="module-desc">
    Walk through your taxes step by step. Upload documents, answer a few questions,
    and get completed IRS and state forms ready to file.
  </p>

  <!-- PROGRESS BAR -->
  <div class="wizard-progress" id="wizard-progress">
    <div class="progress-step active" data-step="1" onclick="goToStep(1)">
      <div class="progress-dot">1</div>
      <div class="progress-label">Year</div>
    </div>
    <div class="progress-step" data-step="2" onclick="goToStep(2)">
      <div class="progress-dot">2</div>
      <div class="progress-label">Personal</div>
    </div>
    <div class="progress-step" data-step="3" onclick="goToStep(3)">
      <div class="progress-dot">3</div>
      <div class="progress-label">Documents</div>
    </div>
    <div class="progress-step" data-step="4" onclick="goToStep(4)">
      <div class="progress-dot">4</div>
      <div class="progress-label">Questions</div>
    </div>
    <div class="progress-step" data-step="5" onclick="goToStep(5)">
      <div class="progress-dot">5</div>
      <div class="progress-label">Deductions</div>
    </div>
    <div class="progress-step" data-step="6" onclick="goToStep(6)">
      <div class="progress-dot">6</div>
      <div class="progress-label">Review</div>
    </div>
    <div class="progress-step" data-step="7" onclick="goToStep(7)">
      <div class="progress-dot">7</div>
      <div class="progress-label">Generate</div>
    </div>
    <div class="progress-step" data-step="8" onclick="goToStep(8)">
      <div class="progress-dot">8</div>
      <div class="progress-label">File</div>
    </div>
  </div>
</header>

<!-- CONTENT -->
<div class="content">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 1: Welcome / Tax Year                        -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step active" data-step="1" id="step-1">
    <div class="step-title">Which tax year are you filing?</div>
    <div class="step-subtitle">Select the year for this return. We support 2023‚Äì2025 with current federal and state tax brackets.</div>

    <div class="option-grid" data-field="taxYear">
      <div class="option-card" data-value="2023">
        <div class="option-icon">üìÖ</div>
        <div class="option-label">2023</div>
        <div class="option-desc">Jan 2023 ‚Äì Dec 2023</div>
      </div>
      <div class="option-card" data-value="2024">
        <div class="option-icon">üìÖ</div>
        <div class="option-label">2024</div>
        <div class="option-desc">Jan 2024 ‚Äì Dec 2024</div>
      </div>
      <div class="option-card selected" data-value="2025">
        <div class="option-icon">üìÖ</div>
        <div class="option-label">2025</div>
        <div class="option-desc">Jan 2025 ‚Äì Dec 2025</div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 2: Personal Info                              -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step" data-step="2" id="step-2">
    <div class="step-title">Tell us about yourself</div>
    <div class="step-subtitle">Basic information needed for your tax return.</div>

    <!-- Name -->
    <div class="input-row" style="margin-bottom:20px">
      <div class="input-group">
        <div class="input-label">First Name</div>
        <input type="text" class="input-field" id="firstName" placeholder="First name" autocomplete="given-name">
      </div>
      <div class="input-group">
        <div class="input-label">Last Name</div>
        <input type="text" class="input-field" id="lastName" placeholder="Last name" autocomplete="family-name">
      </div>
    </div>

    <!-- SSN + State -->
    <div class="input-row" style="margin-bottom:28px">
      <div class="input-group">
        <div class="input-label">SSN (Last 4 digits only)</div>
        <input type="text" class="input-field" id="ssnLast4" placeholder="1234" maxlength="4" pattern="\d{4}" autocomplete="off">
      </div>
      <div class="input-group">
        <div class="input-label">State of Residence</div>
        <div class="option-grid" data-field="stateOfResidence" style="margin-bottom:0">
          <div class="option-card" data-value="CA">
            <div class="option-label">California</div>
          </div>
          <div class="option-card" data-value="NY">
            <div class="option-label">New York</div>
          </div>
          <div class="option-card" data-value="other">
            <div class="option-label">Other</div>
            <div class="option-desc">Federal only</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Filing Status -->
    <div class="input-label" style="margin-bottom:12px">Filing Status</div>
    <div class="option-grid" data-field="filingStatus">
      <div class="option-card selected" data-value="single">
        <div class="option-label">Single</div>
      </div>
      <div class="option-card" data-value="mfj">
        <div class="option-label">Married Filing Jointly</div>
      </div>
      <div class="option-card" data-value="mfs">
        <div class="option-label">Married Filing Separately</div>
      </div>
      <div class="option-card" data-value="hoh">
        <div class="option-label">Head of Household</div>
      </div>
      <div class="option-card" data-value="qss">
        <div class="option-label">Qualifying Surviving Spouse</div>
      </div>
    </div>

    <!-- Dependents -->
    <div class="input-label" style="margin-bottom:12px">Dependents</div>
    <div class="input-row">
      <div class="input-group">
        <div class="input-label">Children under 17</div>
        <input type="number" class="input-field" id="childrenUnder17" value="0" min="0" max="20">
      </div>
      <div class="input-group">
        <div class="input-label">Other dependents</div>
        <input type="number" class="input-field" id="otherDependents" value="0" min="0" max="20">
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 3: Document Upload                            -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step" data-step="3" id="step-3">
    <div class="step-title">Upload your tax documents</div>
    <div class="step-subtitle">
      Drop your W-2s, 1099s, 1098s, and other forms here. Claude Vision will extract the data automatically.
    </div>

    <div class="upload-zone" id="upload-zone">
      <input type="file" id="file-input" multiple accept=".pdf,.png,.jpg,.jpeg,.webp">
      <div class="upload-icon">üìÑ</div>
      <div class="upload-title">Drop files here or click to upload</div>
      <div class="upload-hint">Supports PDF, PNG, JPG, WebP ‚Äî W-2, 1099-NEC, 1099-INT, 1099-DIV, 1098, 1099-B</div>
    </div>

    <div class="doc-list" id="doc-list"></div>

    <div id="income-sources"></div>

    <div id="processing-section" style="display:none">
      <div class="processing-log" id="processing-log">
        <div class="log-entries" id="log-entries"></div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 4: Gap Analysis / Follow-up Questions         -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step" data-step="4" id="step-4">
    <div class="step-title">A few more questions</div>
    <div class="step-subtitle">
      Based on what we've seen in your documents, here are some things that might save you money.
    </div>

    <div id="gap-questions"></div>

    <div id="gap-empty" style="display:none;text-align:center;padding:40px;color:var(--text-muted)">
      Everything looks covered! Your documents captured the key information.
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 5: Deductions & Credits                       -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step" data-step="5" id="step-5">
    <div class="step-title">Deductions & Credits</div>
    <div class="step-subtitle">
      We'll compare standard vs. itemized deductions and check which credits you qualify for.
    </div>

    <!-- Standard vs Itemized -->
    <div class="input-label" style="margin-bottom:12px">Deduction Method</div>
    <div class="deduction-compare" id="deduction-compare">
      <div class="deduction-option selected" data-value="standard" onclick="selectDeduction('standard')">
        <div class="recommended" id="std-recommended" style="display:none">RECOMMENDED</div>
        <div class="ded-type">Standard Deduction</div>
        <div class="ded-amount" id="std-ded-amount">$15,000</div>
        <div class="ded-note">No documentation required</div>
      </div>
      <div class="deduction-option" data-value="itemized" onclick="selectDeduction('itemized')">
        <div class="recommended" id="item-recommended" style="display:none">RECOMMENDED</div>
        <div class="ded-type">Itemized Deductions</div>
        <div class="ded-amount" id="item-ded-amount">$0</div>
        <div class="ded-note">Mortgage interest, SALT, charitable, etc.</div>
      </div>
    </div>

    <!-- Itemized breakdown -->
    <div class="itemized-fields" id="itemized-fields">
      <div class="input-row" style="margin-bottom:16px">
        <div class="input-group">
          <div class="input-label">Mortgage Interest</div>
          <input type="number" class="input-field money" id="ded-mortgage" placeholder="0" oninput="updateItemized()">
        </div>
        <div class="input-group">
          <div class="input-label">State & Local Taxes (SALT) ‚Äî capped at $10,000</div>
          <input type="number" class="input-field money" id="ded-salt" placeholder="0" oninput="updateItemized()">
        </div>
      </div>
      <div class="input-row">
        <div class="input-group">
          <div class="input-label">Charitable Contributions</div>
          <input type="number" class="input-field money" id="ded-charitable" placeholder="0" oninput="updateItemized()">
        </div>
        <div class="input-group">
          <div class="input-label">Medical Expenses (above 7.5% of AGI)</div>
          <input type="number" class="input-field money" id="ded-medical" placeholder="0" oninput="updateItemized()">
        </div>
      </div>
    </div>

    <!-- Credits -->
    <div class="input-label" style="margin-top:32px;margin-bottom:12px">Tax Credits</div>
    <div class="credits-grid" id="credits-grid">
      <div class="credit-card" id="credit-ctc">
        <div class="credit-name">Child Tax Credit</div>
        <div class="credit-amount" id="ctc-amount">$0</div>
        <div class="credit-desc">$2,000 per qualifying child under 17</div>
      </div>
      <div class="credit-card" id="credit-education">
        <div class="credit-name">Education Credits</div>
        <div class="credit-amount" id="edu-credit-amount">$0</div>
        <div class="credit-desc">American Opportunity or Lifetime Learning</div>
      </div>
      <div class="credit-card" id="credit-renter">
        <div class="credit-name">CA Renter's Credit</div>
        <div class="credit-amount" id="renter-credit-amount">$0</div>
        <div class="credit-desc">$60/$120 for qualifying CA renters</div>
      </div>
      <div class="credit-card" id="credit-ev">
        <div class="credit-name">Clean Vehicle Credit</div>
        <div class="credit-amount" id="ev-credit-amount">$0</div>
        <div class="credit-desc">Up to $7,500 for qualifying EVs</div>
      </div>
      <div class="credit-card" id="credit-childcare">
        <div class="credit-name">Child & Dependent Care</div>
        <div class="credit-amount" id="childcare-credit-amount">$0</div>
        <div class="credit-desc">Childcare/daycare expenses credit</div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 6: Computation & Review                       -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step" data-step="6" id="step-6">
    <div class="step-title">Your Tax Summary</div>
    <div class="step-subtitle">
      Here's the full computation. All values are editable ‚Äî click any number to adjust.
    </div>

    <!-- Refund/Owed Banner -->
    <div class="result-banner" id="result-banner">
      <div class="result-label" id="result-label">Estimated Federal Result</div>
      <div class="result-amount" id="result-amount">$0</div>
      <div class="result-detail" id="result-detail"></div>
    </div>

    <!-- Filing Cards -->
    <div class="filing-grid" id="filing-grid">
      <!-- Federal 1040 -->
      <div class="filing-card federal" id="fed-card">
        <div class="filing-label">Federal ‚Äî Form 1040</div>
        <div class="filing-row"><span class="label">Wages (W-2)</span><span class="value" id="fed-wages">$0</span></div>
        <div class="filing-row"><span class="label">Other Income</span><span class="value" id="fed-other">$0</span></div>
        <div class="filing-row"><span class="label">Total Income</span><span class="value" id="fed-income">$0</span></div>
        <div class="filing-row"><span class="label">Adjustments</span><span class="value" id="fed-adj">$0</span></div>
        <div class="filing-row"><span class="label">AGI</span><span class="value" id="fed-agi">$0</span></div>
        <div class="filing-row"><span class="label">Deduction</span><span class="value" id="fed-deduction">$0</span></div>
        <div class="filing-row"><span class="label">Taxable Income</span><span class="value" id="fed-taxable">$0</span></div>
        <div class="filing-row"><span class="label">Income Tax</span><span class="value" id="fed-income-tax">$0</span></div>
        <div class="filing-row"><span class="label">SE Tax</span><span class="value" id="fed-se-tax">$0</span></div>
        <div class="filing-row"><span class="label">Credits</span><span class="value" id="fed-credits">$0</span></div>
        <div class="filing-row"><span class="label">Total Tax</span><span class="value" id="fed-total-tax">$0</span></div>
        <div class="filing-row"><span class="label">Withholding</span><span class="value" id="fed-withheld">$0</span></div>
        <div class="filing-row total"><span class="label">Refund / Owed</span><span class="value" id="fed-result">$0</span></div>
      </div>

      <!-- CA 540 -->
      <div class="filing-card state" id="ca-card" style="display:none">
        <div class="filing-label">California ‚Äî Form 540</div>
        <div class="filing-row"><span class="label">Federal AGI</span><span class="value" id="ca-agi">$0</span></div>
        <div class="filing-row"><span class="label">CA Deduction</span><span class="value" id="ca-deduction">$0</span></div>
        <div class="filing-row"><span class="label">Taxable Income</span><span class="value" id="ca-taxable">$0</span></div>
        <div class="filing-row"><span class="label">CA Tax</span><span class="value" id="ca-tax">$0</span></div>
        <div class="filing-row"><span class="label">Mental Health Surtax</span><span class="value" id="ca-mh-tax">$0</span></div>
        <div class="filing-row"><span class="label">Credits</span><span class="value" id="ca-credits">$0</span></div>
        <div class="filing-row"><span class="label">Total CA Tax</span><span class="value" id="ca-total-tax">$0</span></div>
        <div class="filing-row"><span class="label">Withholding</span><span class="value" id="ca-withheld">$0</span></div>
        <div class="filing-row total"><span class="label">Refund / Owed</span><span class="value" id="ca-result">$0</span></div>
      </div>

      <!-- NY IT-201 -->
      <div class="filing-card state state-ny" id="ny-card" style="display:none">
        <div class="filing-label">New York ‚Äî Form IT-201</div>
        <div class="filing-row"><span class="label">Federal AGI</span><span class="value" id="ny-agi">$0</span></div>
        <div class="filing-row"><span class="label">NY Deduction</span><span class="value" id="ny-deduction">$0</span></div>
        <div class="filing-row"><span class="label">Taxable Income</span><span class="value" id="ny-taxable">$0</span></div>
        <div class="filing-row"><span class="label">NY Tax</span><span class="value" id="ny-tax">$0</span></div>
        <div class="filing-row"><span class="label">Credits</span><span class="value" id="ny-credits">$0</span></div>
        <div class="filing-row"><span class="label">Total NY Tax</span><span class="value" id="ny-total-tax">$0</span></div>
        <div class="filing-row"><span class="label">Withholding</span><span class="value" id="ny-withheld">$0</span></div>
        <div class="filing-row total"><span class="label">Refund / Owed</span><span class="value" id="ny-result">$0</span></div>
      </div>
    </div>

    <!-- Rules Engine Panel -->
    <div class="rules-panel" id="rules-panel" style="display:none">
      <div class="rules-panel-header" onclick="toggleRulesPanel()">
        <div class="rules-panel-title">Compliance & Savings Check</div>
        <div class="rules-panel-toggle">‚ñº</div>
      </div>
      <div class="rules-panel-body">
        <div class="rules-stat-grid" id="rules-stats">
          <div class="rules-stat passed"><div class="rules-stat-num" id="rp-passed">0</div><div class="rules-stat-label">Passed</div></div>
          <div class="rules-stat failed"><div class="rules-stat-num" id="rp-failed">0</div><div class="rules-stat-label">Failed</div></div>
          <div class="rules-stat warnings"><div class="rules-stat-num" id="rp-warnings">0</div><div class="rules-stat-label">Warnings</div></div>
          <div class="rules-stat skipped"><div class="rules-stat-num" id="rp-skipped">0</div><div class="rules-stat-label">Skipped</div></div>
        </div>
        <div id="rules-detail"></div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 7: Form Generation                            -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step" data-step="7" id="step-7">
    <div class="step-title">Generate Your Tax Forms</div>
    <div class="step-subtitle">
      We'll fill out the official IRS and state forms with your data.
    </div>

    <button class="generate-btn" id="generate-btn" onclick="generateAllForms()">
      Generate Tax Forms
    </button>

    <div class="form-gen-list" id="form-gen-list">
      <div class="form-gen-item" id="gen-1040">
        <div class="form-gen-icon">üìÑ</div>
        <div class="form-gen-info">
          <div class="form-gen-name">Federal Form 1040</div>
          <div class="form-gen-detail">U.S. Individual Income Tax Return</div>
        </div>
        <div class="form-gen-status pending" id="gen-1040-status">Pending</div>
      </div>
      <div class="form-gen-item" id="gen-ca540" style="display:none">
        <div class="form-gen-icon">üìÑ</div>
        <div class="form-gen-info">
          <div class="form-gen-name">California Form 540</div>
          <div class="form-gen-detail">California Resident Income Tax Return</div>
        </div>
        <div class="form-gen-status pending" id="gen-ca540-status">Pending</div>
      </div>
      <div class="form-gen-item" id="gen-ny201" style="display:none">
        <div class="form-gen-icon">üìÑ</div>
        <div class="form-gen-info">
          <div class="form-gen-name">New York Form IT-201</div>
          <div class="form-gen-detail">Resident Income Tax Return</div>
        </div>
        <div class="form-gen-status pending" id="gen-ny201-status">Pending</div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- STEP 8: Output / Download                          -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="wizard-step" data-step="8" id="step-8">
    <div class="step-title">Your forms are ready</div>
    <div class="step-subtitle">
      Download your completed tax forms, print them, or start over.
    </div>

    <div id="form-downloads"></div>

    <div class="output-actions" style="margin-top:24px">
      <button class="output-btn" id="btn-download-all" onclick="downloadAllForms()">
        <div class="output-icon">üì•</div>
        <div class="output-label">Download All</div>
        <div class="output-desc">Save all forms as PDF</div>
      </button>
      <button class="output-btn" onclick="window.print()">
        <div class="output-icon">üñ®Ô∏è</div>
        <div class="output-label">Print</div>
        <div class="output-desc">Print tax summary</div>
      </button>
      <button class="output-btn disabled" disabled>
        <div class="output-icon">üìß</div>
        <div class="output-label">Email</div>
        <div class="output-desc">Coming soon</div>
      </button>
    </div>

    <!-- Filing disclaimer -->
    <div class="disclaimer">
      <strong>Important</strong>
      This tool generates completed tax forms for your review. It does not e-file with the IRS or state tax authorities.
      All values should be verified against original documents before filing. Consult a qualified tax professional
      for complex situations. This is not professional tax advice.
    </div>
  </div>

  <!-- ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ -->
  <div class="wizard-nav" id="wizard-nav">
    <button class="nav-btn" id="prev-btn" onclick="prevStep()" disabled>‚Üê Back</button>
    <span class="nav-step-indicator" id="step-indicator">1 / 8</span>
    <button class="nav-btn primary" id="next-btn" onclick="nextStep()">Next ‚Üí</button>
  </div>

</div>

<!-- FOOTER -->
<footer class="module-footer">
  <div class="footer-brand">CUBE √ó TAX PREP</div>
  <div class="footer-right"><a href="approach.md">Methodology</a></div>
</footer>

<div class="noise-overlay"></div>

<!-- SCRIPTS -->
<script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
<script src="tax-data.js"></script>
<script src="rules.js"></script>
<script src="gap-analysis.js"></script>
<script src="form-filler.js"></script>
<script src="wizard.js"></script>
</body>
</html>
